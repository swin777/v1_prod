(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{329:function(e,t,a){"use strict";$class("map.MapHandler").define({map:null,initMap:function(e){this.map=new olleh.maps.Map(document.getElementById(e),{zoomControl:!0,zoomControlOptions:{top:10,right:15},panControl:!1,scaleControl:!0,scaleControlOptions:{left:7,bottom:5},copyrightControl:!0,copyrightControlOptions:{bottom:9},mapTypeControl:!1,measureControl:!0,measureControlOptions:{right:15}});var t=new olleh.maps.UTMK(965898.9999999991,1928928.9999999197);this.map.setCenter(t),this.map.setZoom(11),_map=this.map,$(".btn_present").click(function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){e=new olleh.maps.LatLng(e.coords.latitude,e.coords.longitude),_map.panTo(e)},function(e){console.error(e)},{enableHighAccuracy:!1,maximumAge:0,timeout:1/0}):alert("GPS를 지원하지 않습니다")})}})},330:function(e,t,a){"use strict";$class("tool.PlaceSearch").define({tmpl:{},searchResult:null,sortBy:"relevance",currMakers:[],geo_box01_dom:$("#geo_box01"),placeResult_dom:$("#placeResult"),placeList_dom:$("#placeList"),placePage_dom:$("#placePage"),placeKeyword_dom:$("#placeKeyword"),placeKeywordStr_dom:$("#placeKeywordStr"),placeCnt_dom:$("#placeCnt"),placeOrder1_dom:$("#placeSearchResult #placeOrder1"),placeOrder2_dom:$("#placeSearchResult #placeOrder2"),placeSearchResult_dom:$("#placeSearchResult"),placeElement_dom:null,clusterer:null,infoWindow:null,autoComplate:null,pageNavi:null,PlaceSearch:function(){var e=this;a.e(2).then(function(){var t=[a(341),a(342),a(339),a(340),a(343)];(function(t,a,o,n,i){e.tmpl.placeResultHtml=t,e.tmpl.placeInfoWindow=a,e.tmpl.placeClusterInfoWindow=o,e.autoComplate=new util.AutoComplate(e.placeKeyword_dom,{fun:e.autoComplateCallback,thisArg:e}),e.pageNavi=new util.PageNavi(e.placePage_dom,{fun:e.searchCall,thisArg:e})}).apply(null,t)}).catch(a.oe),e.clusterer=new olleh.maps.overlay.MarkerClusterer({gap:1,displayArea:!1,minZoom:0,maxZoom:14,clusterOpts:{iconFn:function(e){return{url:"./assets/images/ic_now_plus.png",size:new olleh.maps.Size(25,32),anchor:new olleh.maps.Point(12,32),origin:new olleh.maps.Point(-2,0)}}},afterCluster:function(t){t.onEvent("click",function(a){e.clusterInfoWindowShow(t.getAllMarkers())})}}),e.clusterer.setMap(_map),e.mapEvent(),e.domEvent()},domEvent:function(){var e=this;$(".btn_d").click(function(){$("#aside").stop().animate({left:"0px"},500),$(".bg_black").css({display:"block"})}),$("#geo_box01 .btn_search").click(function(){e.searchCall(!0)}),$("#placeClear").click(function(){e.placeResult_dom.html(""),e.placeList_dom.scrollTop(0),e.placeKeywordStr_dom.text(""),e.placeCnt_dom.text(""),e.pageNavi.clear(),e.clusterer.clear()}),e.placeOrder1_dom.click(function(){e.placeOrder1_dom.attr("class","on"),e.placeOrder2_dom.attr("class",""),e.sortBy="relevance",e.searchCall()}),e.placeOrder2_dom.click(function(){e.placeOrder1_dom.attr("class",""),e.placeOrder2_dom.attr("class","on"),e.sortBy="distance",e.searchCall()}),$(".btn_road").click(function(){_app.placeSearch.hide(),_app.roadSearch.show()})},mapEvent:function(){var e=this;_map.onEvent("click",function(t){"layer_container"==t.originEvent.target.id&&e.infoWindow&&(e.infoWindow.close(),e.listElementFocus(null))})},searchCall:function(e){var t=this;if(""!=t.placeKeyword_dom.val()){e&&t.pageNavi.clear(),t.placeResultVisible(),t.autoComplate.close();var a=(t.pageNavi.currentPage-1)*t.pageNavi.pageSize,o=olleh.maps.LatLng.valueOf(_map.getCenter());$.ajax({url:_app.geomasterUrl+"/search/v1.0/pois?sortBy="+t.sortBy+"&numberOfResults="+t.pageNavi.pageSize+"&start="+a,type:"post",contentType:"application/json",dataType:"json",headers:{Authorization:_app.apiKey,Accept:"application/json","Accept-Language":"ko-KR"},data:JSON.stringify({terms:t.placeKeyword_dom.val(),point:{lat:o.y,lng:o.x}}),success:function(e){t.searchResult=e,t.searchResult.pois&&(t.placeDisplay(),t.mapDisplay(),t.placeKeywordStr_dom.text(t.placeKeyword_dom.val()),t.placeCnt_dom.text(t.searchResult.numberOfPois+"건"))},error:function(e){}})}},autoComplateCallback:function(e){this.searchCall()},placeResultVisible:function(){this.placeSearchResult_dom.show(),_app.eventbusjs.dispatch("placeSearchShow")},placeDisplay:function(){var e=this;e.placeResult_dom.html(""),e.placeList_dom.scrollTop(0),e.searchResult.pois.forEach(function(t,a){var o="";t.phones&&(t.phones.normal&&t.phones.normal.length>0&&(o=t.phones.normal[0]),t.phones.representation&&t.phones.representation.length>0&&(o=t.phones.representation[0]));var n={id:t.id,order:String.fromCharCode(65+a),name:t.name,phone:o,category:t.category.middleName+" > "+t.category.subName,address:t.address.siDo+" "+t.address.siGunGu+" "+t.address.street+" "+t.address.streetNumber,addressGibun:t.address.eupMyeonDong+" "+t.address.houseNumber,extension:t.extension};t.purifyData=n,e.placeResult_dom.append(olleh.maps.util.applyTemplate(e.tmpl.placeResultHtml,n))});var t=$("#placeList .placeElement .ico_start"),a=$("#placeList .placeElement .ico_end");e.placeElement_dom=$("#placeList .placeElement"),e.placeElement_dom.click(function(){var e=this,t=_app.placeSearch;t.placeElement_dom.attr("class","placeElement"),$(this).attr("class","placeElement on"),t.currMakers.forEach(function(a,o){if(e.id==a.uuid)return t.infoWindowShow(a,a.purifyData,!0,!0,!1),a.orgZIndex=$(a.elements.upper_overlay_pane).css("z-index"),void a.setZIndex(olleh.maps.overlay.BaseOverlay.MAX_ZINDEX)})}),t.click(function(t){var a=this;t.stopPropagation(),e.currMakers.forEach(function(e,t){if(a.id=="start_"+e.uuid)return _app.placeSearch.hide(),_app.roadSearch.show(),void _app.roadSearch.setStart(e)})}),a.click(function(t){var a=this;t.stopPropagation(),e.currMakers.forEach(function(e,t){if(a.id=="end_"+e.uuid)return _app.placeSearch.hide(),_app.roadSearch.show(),void _app.roadSearch.setEnd(e)})}),e.searchResult.numberOfPois>e.pageNavi.pageSize?(e.pageNavi.makeNavi(e.searchResult.numberOfPois),e.pageNavi.show()):e.pageNavi.hide()},listElementFocus:function(e){var t=this;if(t.placeElement_dom.attr("class","placeElement"),e)for(var a=0;a<t.placeElement_dom.length;a++)if(t.placeElement_dom[a].id==e.uuid)return $(t.placeElement_dom[a]).attr("class","placeElement on"),void t.placeList_dom.scrollTop(144*a)},mapDisplay:function(){var e=this,t=null;e.currMakers=[],e.clusterer.clear(),e.clusterer.setMap(null),e.searchResult.pois.forEach(function(a,o){var n=new olleh.maps.LatLng(a.point.lat,a.point.lng),i=olleh.maps.UTMK.valueOf(n),r=new olleh.maps.overlay.Marker({position:i,icon:{url:"./assets/images/ic_firm_"+String.fromCharCode(65+o)+".png"}});r.uuid=a.id,r.purifyData=a.purifyData,r.purifyData.imgUrl="./assets/images/ic_firm_"+String.fromCharCode(65+o)+".png",r.onEvent("click",function(t){e.infoWindowShow(r,a.purifyData,!1,!1,!0)}),e.currMakers.push(r),e.clusterer.add(r),t=0==o?new olleh.maps.Bounds(i,i):t.union(i)}),t&&(t.expand(300,400),_map.fitBounds(t)),e.clusterer.setMap(_map)},infoWindowShow:function(e,t,a,o,n){var i=this;i.infoWindow&&(i.infoWindow.close(),delete i.infoWindow),n&&i.listElementFocus(null),i.infoWindow=new override.CustomInfoWindow({disableAutoPan:!1,position:e.getPosition(),disableCloseButton:!0,padding:0,content:olleh.maps.util.applyTemplate(i.tmpl.placeInfoWindow,t)}),o&&_map.setCenter(e.getPosition()),a&&_map.setZoom(13),i.infoWindow.setPixelOffset(new olleh.maps.Point(0,10)),i.infoWindow.open(_map,e),n&&i.listElementFocus(e),i.timer=setInterval(function(){clearInterval(i.timer),$(".btn_lyclose").click(function(){i.infoWindow&&(i.infoWindow.close(),i.listElementFocus(null),e.setZIndex(e.orgZIndex))}),$(".btn_geolist .btn_detail").click(function(){e.purifyData.extension&&e.purifyData.extension.homepageURL?window.open(e.purifyData.extension.homepageURL):alert("상세정보가 없습니다.")}),$(".btn_geolist .ico_start").click(function(){i.infoWindow.close(),_app.placeSearch.hide(),_app.roadSearch.show(),_app.roadSearch.setStart(e)}),$(".btn_geolist .ico_end").click(function(){i.infoWindow.close(),_app.placeSearch.hide(),_app.roadSearch.show(),_app.roadSearch.setEnd(e)}),$(".btn_geolist .ico_via").click(function(){i.infoWindow.close(),_app.placeSearch.hide(),_app.roadSearch.show(),_app.roadSearch.setWp(e)})},500)},clusterInfoWindowShow:function(e){var t=this,a="";if(!(_map.getZoom()<13)){var o=null;e.forEach(function(e,n){o=e,a+=olleh.maps.util.applyTemplate(t.tmpl.placeClusterInfoWindow,e.purifyData)}),t.infoWindow&&(t.infoWindow.close(),t.listElementFocus(null)),t.infoWindow=new override.CustomInfoWindow({disableAutoPan:!1,position:o.getPosition(),disableCloseButton:!0,padding:6,content:a}),t.infoWindow.setPixelOffset(new olleh.maps.Point(0,10)),t.infoWindow.open(_map,o),t.custerTimer=setInterval(function(){clearInterval(t.custerTimer),$(".js_link").click(function(){var t=_app.placeSearch,a=this.id;e.forEach(function(e,o){if(a==e.uuid)return t.infoWindowShow(e,e.purifyData,!0,!0,!1),void t.listElementFocus(e)})})},500)}},hide:function(){this.geo_box01_dom.hide(),this.placeSearchResult_dom.hide(),this.clusterer&&this.clusterer.clear(),_app.eventbusjs.dispatch("placeSearchHide")},show:function(){this.geo_box01_dom.show(),this.placeSearchResult_dom.show(),this.searchCall(),_app.eventbusjs.dispatch("placeSearchShow")},release:function(){this.clusterer&&this.clusterer.clear()}})},331:function(e,t,a){"use strict";$class("tool.RoadSearch").define({tmpl:{},searchResult:null,sortBy:"relevance",currMakers:[],geo_box02_dom:$("#geo_box02"),startKeyword_dom:$("#startKeyword"),endKeyword_dom:$("#endKeyword"),wp1Keyword_dom:$("#wp1Keyword"),wp2Keyword_dom:$("#wp2Keyword"),wp3Keyword_dom:$("#wp3Keyword"),wayPointArea_dom:$(".wayPointArea"),wrap_inpAdd_dom:$(".wrap_inpAdd"),attSearchResult_dom:$("#attSearchResult"),attResult_dom:$("#attResult"),attList_dom:$("#attList"),attPage_dom:$("#attPage"),attElement_dom:null,attKeywordStr_dom:$("#attKeywordStr"),attCnt_dom:$("#attCnt"),attOrder1_dom:$("#attOrder1"),attOrder2_dom:$("#attOrder2"),attWrap_dom:$("#attWrap"),routeWrap_dom:$("#routeWrap"),routeList_dom:$("#routeList"),placeOrder1_dom:$("#attSearchResult #placeOrder1"),placeOrder2_dom:$("#attSearchResult #placeOrder2"),wpCnt:0,keyWord:null,clusterer:null,infoWindow:null,autoComplateArr:[],pageNavi:null,routeSearch:null,attention:null,attMappingInfo:{start:null,wp1:null,wp2:null,wp3:null,end:null},RoadSearch:function(){var e=this;e.attSearchResult_dom.css("top","80px"),e.wayPointArea_dom.sortable(),e.wayPointArea_dom.disableSelection(),a.e(3).then(function(){var t=[a(341),a(342),a(339),a(344),a(340),a(343),a(347)];(function(t,a,o,n,i,r,s){e.tmpl.placeResultHtml=t,e.tmpl.placeInfoWindow=a,e.tmpl.placeClusterInfoWindow=o,e.tmpl.routeInfoWindow=n,e.autoComplateArr.push(new util.AutoComplate(e.startKeyword_dom,{fun:e.autoCallBack,thisArg:e,etcArg:{attention:"start"}})),e.autoComplateArr.push(new util.AutoComplate(e.endKeyword_dom,{fun:e.autoCallBack,thisArg:e,etcArg:{attention:"end"}})),e.autoComplateArr.push(new util.AutoComplate(e.wp1Keyword_dom,{fun:e.autoCallBack,thisArg:e,etcArg:{attention:"wp1"}})),e.autoComplateArr.push(new util.AutoComplate(e.wp2Keyword_dom,{fun:e.autoCallBack,thisArg:e,etcArg:{attention:"wp2"}})),e.autoComplateArr.push(new util.AutoComplate(e.wp3Keyword_dom,{fun:e.autoCallBack,thisArg:e,etcArg:{attention:"wp3"}})),e.pageNavi=new util.PageNavi(e.attPage_dom,{fun:e.searchCall,thisArg:e}),e.routeSearch=new tool.RouteSearch(e.attList_dom,e.routeList_dom,e.attWrap_dom,e.routeWrap_dom),_app.routeSearch=e.routeSearch}).apply(null,t)}).catch(a.oe),e.clusterer=new olleh.maps.overlay.MarkerClusterer({gap:1,displayArea:!1,minZoom:0,maxZoom:14,clusterOpts:{iconFn:function(e){return{url:"./assets/images/ic_now_plus.png",size:new olleh.maps.Size(25,32),anchor:new olleh.maps.Point(12,32),origin:new olleh.maps.Point(-2,0)}}},afterCluster:function(t){t.onEvent("click",function(a){e.clusterInfoWindowShow(t.getAllMarkers())})}}),e.clusterer.setMap(_map),e.mapEvent(),e.domEvent()},domEvent:function(){var e=this;$(".btn_Gsearch").click(function(){_app.placeSearch.show(),_app.roadSearch.hide()}),e.geo_box02_dom.find(".btn_gclose").click(function(){e.wpRemove(this)}),e.geo_box02_dom.find(".btn_via").click(function(){e.wpAdd()}),$("#geo_box02 .btn_search").click(function(){e.attention=$(this).attr("class").split(" ").reverse()[0],e.keyWord=e[e.attention+"Keyword_dom"].val(),e.searchCall(!0)}),$("#geo_box02 .btn_gadd").click(function(){var t=e.attMappingInfo.start,a=e.attMappingInfo.end;e.attMappingInfo.start=a,e.startKeyword_dom.val(a.purifyData.name),e.attMappingInfo.end=t,e.endKeyword_dom.val(t.purifyData.name),e.attMappingInfo.start&&e.attMappingInfo.end&&e.routeSearch.searchCall(e.attMappingInfo)}),$("#attSearchResult .greenBtn").click(function(){e.infoWindow&&e.infoWindow.close(),e.clusterer&&e.clusterer.clear(),e.routeSearch.searchCall(e.attMappingInfo)}),$("#roadClear").click(function(){e.attResult_dom.html(""),e.attList_dom.scrollTop(0),e.attKeywordStr_dom.text(""),e.attCnt_dom.text(""),e.pageNavi.clear(),e.clusterer.clear()}),e.placeOrder1_dom.click(function(){e.placeOrder1_dom.attr("class","on"),e.placeOrder2_dom.attr("class",""),e.sortBy="relevance",e.searchCall()}),e.placeOrder2_dom.click(function(){e.placeOrder1_dom.attr("class",""),e.placeOrder2_dom.attr("class","on"),e.sortBy="distance",e.searchCall()})},mapEvent:function(){},attMapping:function(e){this.attMappingInfo[this.attention]=e,this[this.attention+"Keyword_dom"].val(e.purifyData.name)},autoCallBack:function(e,t){this.attention=t.attention,this.keyWord=e,this.searchCall()},wpAdd:function(){var e=this;if(e.wpCnt<3){for(var t=0;t<e.wrap_inpAdd_dom.length;t++){var a=$(e.wrap_inpAdd_dom[t]);if("none"==a.css("display")){a.show();break}}e.wpCnt++,e.attSearchResultHeight()}else alert("경유지는 3개까지 입니다.")},wpRemove:function(e){var t=this;$(e.parentNode).hide(),t.wpCnt--;var a="wp"+e.parentNode.id.split("").reverse().join("").substring(0,1);t[a+"Keyword_dom"].val(""),t.attMappingInfo[a]=null,t.attSearchResultHeight(),t.attMappingInfo.start&&t.attMappingInfo.end&&t.routeSearch.searchCall(t.attMappingInfo)},searchCall:function(e){var t=this;if(t.keyWord){t.attList_dom.show(),t.routeList_dom.hide(),t.attWrap_dom.show(),t.routeWrap_dom.hide(),t.routeSearch.mapClear(),e&&t.pageNavi.clear(),t.attResultVisible(),t.autoComplateArr.forEach(function(e){e.close()});var a=(t.pageNavi.currentPage-1)*t.pageNavi.pageSize,o=olleh.maps.LatLng.valueOf(_map.getCenter());$.ajax({url:_app.geomasterUrl+"/search/v1.0/pois?sortBy="+t.sortBy+"&numberOfResults="+t.pageNavi.pageSize+"&start="+a,type:"post",contentType:"application/json",dataType:"json",headers:{Authorization:_app.apiKey,Accept:"application/json","Accept-Language":"ko-KR"},data:JSON.stringify({terms:t.keyWord,point:{lat:o.y,lng:o.x}}),success:function(e){t.searchResult=e,t.searchResult.pois&&(t.attDisplay(),t.mapDisplay(),t.attKeywordStr_dom.text(t.keyWord),t.attCnt_dom.text(t.searchResult.numberOfPois+"건"))},error:function(e){}})}},attDisplay:function(){var e=this;e.attResult_dom.html(""),e.attList_dom.scrollTop(0),e.searchResult.pois.forEach(function(t,a){var o="";t.phones&&(t.phones.normal&&t.phones.normal.length>0&&(o=t.phones.normal[0]),t.phones.representation&&t.phones.representation.length>0&&(o=t.phones.representation[0]));var n={id:t.id,order:String.fromCharCode(65+a),name:t.name,phone:o,category:t.category.middleName+" > "+t.category.subName,address:t.address.siDo+" "+t.address.siGunGu+" "+t.address.street+" "+t.address.streetNumber,addressGibun:t.address.eupMyeonDong+" "+t.address.houseNumber,extension:t.extension};t.purifyData=n,e.attResult_dom.append(olleh.maps.util.applyTemplate(e.tmpl.placeResultHtml,n))});var t=$("#attList .placeElement .ico_start"),a=$("#attList .placeElement .ico_end");e.attElement_dom=$("#attList .placeElement"),e.attElement_dom.click(function(){var e=this,t=_app.roadSearch;t.attElement_dom.attr("class","placeElement"),$(this).attr("class","placeElement on"),t.currMakers.forEach(function(a,o){if(e.id==a.uuid)return t.infoWindowShow(a,a.purifyData,!0,!0,!1,t.tmpl.routeInfoWindow),a.orgZIndex=$(a.elements.upper_overlay_pane).css("z-index"),a.setZIndex(olleh.maps.overlay.BaseOverlay.MAX_ZINDEX),void t.attMapping(a)})}),t.click(function(t){var a=this;t.stopPropagation(),e.currMakers.forEach(function(t,o){a.id!="start_"+t.uuid||e.setStart(t)})}),a.click(function(t){var a=this;t.stopPropagation(),e.currMakers.forEach(function(t,o){a.id!="end_"+t.uuid||e.setEnd(t)})}),e.searchResult.numberOfPois>e.pageNavi.pageSize?(e.pageNavi.makeNavi(e.searchResult.numberOfPois),e.pageNavi.show()):e.pageNavi.hide()},listElementFocus:function(e){var t=this;if(t.attElement_dom&&t.attElement_dom.attr("class","placeElement"),e)for(var a=0;a<t.attElement_dom.length;a++)if(t.attElement_dom[a].id==e.uuid)return $(t.attElement_dom[a]).attr("class","placeElement on"),void t.attList_dom.scrollTop(144*a)},mapDisplay:function(){var e=this,t=null;e.currMakers=[],e.clusterer.clear(),e.clusterer.setMap(null),e.searchResult.pois.forEach(function(a,o){var n=new olleh.maps.LatLng(a.point.lat,a.point.lng),i=olleh.maps.UTMK.valueOf(n),r=new olleh.maps.overlay.Marker({position:i,icon:{url:"./assets/images/ic_firm_"+String.fromCharCode(65+o)+".png"}});r.uuid=a.id,r.purifyData=a.purifyData,r.purifyData.imgUrl="./assets/images/ic_firm_"+String.fromCharCode(65+o)+".png",r.onEvent("click",function(t){e.infoWindowShow(r,a.purifyData,!1,!1,!0,null)}),e.currMakers.push(r),e.clusterer.add(r),0==o?(t=new olleh.maps.Bounds(i,i),e.attMapping(r)):t=t.union(i)}),t&&(t.expand(300,400),_map.fitBounds(t)),e.clusterer.setMap(_map)},infoWindowShow:function(e,t,a,o,n,i){var r,s=this;if(s.infoWindow&&(s.infoWindow.close(),delete s.infoWindow),n&&s.listElementFocus(null),i){var l=JSON.parse(JSON.stringify(t));"start"==s.attention?l.typeImgUrl="./assets/images/img_start.gif":"end"==s.attention?l.typeImgUrl="./assets/images/img_stop.gif":l.typeImgUrl="./assets/images/img_via.gif",r=olleh.maps.util.applyTemplate(i,l)}else r=olleh.maps.util.applyTemplate(s.tmpl.placeInfoWindow,t);s.infoWindow=new override.CustomInfoWindow({disableAutoPan:!1,position:e.getPosition(),disableCloseButton:!0,padding:0,content:r}),o&&_map.setCenter(e.getPosition()),a&&_map.setZoom(13),s.infoWindow.setPixelOffset(new olleh.maps.Point(0,10)),s.infoWindow.open(_map,e),n&&s.listElementFocus(e),s.timer=setInterval(function(){clearInterval(s.timer),$(".btn_lyclose").click(function(){s.infoWindow&&(s.infoWindow.close(),s.listElementFocus(null),e.setZIndex(e.orgZIndex)),$(".btn_geolist .btn_detail").click(function(){e.purifyData.extension&&e.purifyData.extension.homepageURL?window.open(e.purifyData.extension.homepageURL):alert("상세정보가 없습니다.")}),$(".btn_geolist .ico_start").click(function(){s.infoWindow.close(),s.setStart(e)}),$(".btn_geolist .ico_end").click(function(){s.infoWindow.close(),s.setEnd(e)}),$(".btn_geolist .ico_via").click(function(){s.infoWindow.close(),s.setWp(e)})})},500)},clusterInfoWindowShow:function(e){var t=this,a="";if(!(_map.getZoom()<13)){var o=null;e.forEach(function(e,n){o=e,a+=olleh.maps.util.applyTemplate(t.tmpl.placeClusterInfoWindow,e.purifyData)}),t.infoWindow&&(t.infoWindow.close(),t.listElementFocus(null)),t.infoWindow=new override.CustomInfoWindow({disableAutoPan:!1,position:o.getPosition(),disableCloseButton:!0,padding:6,content:a}),t.infoWindow.setPixelOffset(new olleh.maps.Point(0,10)),t.infoWindow.open(_map,o),$(".js_link").click(function(){var t=_app.roadSearch,a=this.id;e.forEach(function(e,o){if(a==e.uuid)return t.infoWindowShow(e,e.purifyData,!0,!0,!1,null),void t.listElementFocus(e)})})}},attSearchResultHeight:function(){var e=40*this.wpCnt+80;this.attSearchResult_dom.css("top",e+"px")},attResultVisible:function(){this.attSearchResult_dom.show(),_app.eventbusjs.dispatch("roadSearchShow")},setStart:function(e,t){var a=this;a.attention="start",a.attMapping(e),t||a.infoWindowShow(e,e.purifyData,!0,!0,!1,a.tmpl.routeInfoWindow),a.clusterer.add(e)},setEnd:function(e,t){var a=this;a.attention="end",a.attMapping(e),t||a.infoWindowShow(e,e.purifyData,!0,!0,!1,a.tmpl.routeInfoWindow),a.clusterer.add(e)},setWp:function(e,t){var a=this;0==a.wpCnt&&a.wpAdd(),a.attention="wp"+a.wpCnt,a.attMapping(e),t||a.infoWindowShow(e,e.purifyData,!0,!0,!1,a.tmpl.routeInfoWindow)},hide:function(){var e=this;e.geo_box02_dom.hide(),e.attSearchResult_dom.hide(),e.routeSearch.mapClear(),e.clusterer&&e.clusterer.clear(),_app.eventbusjs.dispatch("roadSearchHide")},show:function(){var e=this;e.geo_box02_dom.show(),e.attSearchResult_dom.show(),e.attMappingInfo.start&&e.attMappingInfo.end&&e.routeSearch.searchCall(e.attMappingInfo),_app.eventbusjs.dispatch("roadSearchShow")},release:function(){this.clusterer&&this.clusterer.clear()}})},332:function(e,t,a){"use strict";$class("tool.BaseLayer").define({layer_rOpen:$(".layer_rOpen"),mapType1_dom:$(".mapType1"),placeSearchResult_dom:$("#placeSearchResult"),attSearchResult_dom:$("#attSearchResult"),cadastralLayer:null,contourMapLayer:null,BaseLayer:function(){var e=this;$(".btn_option").click(function(){e.layer_rOpen.css({display:"block"})}),$(".btn_rOpen").click(function(){e.layer_rOpen.css({display:"none"})}),e.initLayer(),e.mapType1(),e.mapType2(),_app.eventbusjs.addEventListener("leftExpand",e.leftExpandCollapse,e),_app.eventbusjs.addEventListener("leftCollapse",e.leftExpandCollapse,e),_app.eventbusjs.addEventListener("placeSearchHide",e.leftExpandCollapse,e),_app.eventbusjs.addEventListener("placeSearchShow",e.leftExpandCollapse,e),_app.eventbusjs.addEventListener("roadSearchHide",e.leftExpandCollapse,e),_app.eventbusjs.addEventListener("roadSearchShow",e.leftExpandCollapse,e)},leftExpandCollapse:function(){$(".ollehmap-corner").length>0&&$(".ollehmap-corner").css("left",_app.leftResultMgr.leftGap())},initLayer:function(){this.cadastralLayer=new olleh.maps.layer.OllehTileLayer({name:"OllehCadastral",label:"지적편집도",tileURLTmpl:"http://map.ktgis.com/CadastralMap/cadastral4.04.1_0527/layers/_alllayers/l#{z}/r#{y}/c#{x}.png",minZoom:3,maxZoom:13,autoActivate:!0}),this.contourMapLayer=new olleh.maps.layer.OllehTileLayer({name:"OllehContourMap",label:"지형도",tileURLTmpl:"http://map.ktgis.com/HybridMap/3d130924/layers/_alllayers/l#{z}/r#{y}/c#{x}.png",minZoom:0,maxZoom:13,autoActivate:!0})},mapType1:function(){var e=this;e.mapType1_dom.click(function(){e.mapType1_dom.prop("checked",!1);var t=$(this);t.prop("checked",!0),_map.setMapTypeId(t.attr("mapType"))})},mapType2:function(){var e=this;$("#trafficInfo").change(function(){$(this).is(":checked")?_map.services.trafficInfo.activate():_map.services.trafficInfo.deactivate(),e.leftExpandCollapse()}),$("#cadastral").change(function(){$(this).is(":checked")?e.cadastralLayer.setMap(_map):e.cadastralLayer.setMap(null)}),$("#contour").change(function(){$(this).is(":checked")?e.contourMapLayer.setMap(_map):e.contourMapLayer.setMap(null)})}})},333:function(e,t,a){"use strict";$class("tool.ThemeLayer").define({wrap_facilty:$(".wrap_facilty"),themeByn:$(".themeByn"),themeMsg:$(".themeMsg"),themeSelectImg:$("#themeSelectImg"),tmpl:{},markerArr:[],themeCode:null,markerImgUrl:null,resultPois:null,exeMode:!1,clusterer:null,infoWindow:null,guidVal:null,idleEvent:!0,warnMsged:!1,ThemeLayer:function(){var e=this;a.e(4).then(function(){var t=[a(344),a(339)];(function(t,a){e.tmpl.routeInfoWindow=t,e.tmpl.placeClusterInfoWindow=a}).apply(null,t)}).catch(a.oe),e.clusterer=new olleh.maps.overlay.MarkerClusterer({gap:1,displayArea:!1,minZoom:0,maxZoom:14,clusterOpts:{iconFn:function(e){this.setDisplaySize(!0);var t=olleh.maps.overlay.MarkerCluster.DEFAULT_ICON_FN(e);return t.origin=new olleh.maps.Point(51*(4-Math.min(Math.floor(e/20),4)),-3),t}},afterCluster:function(t){t.onEvent("click",function(a){e.clusterInfoWindowShow(t.getAllMarkers())})}}),e.clusterer.setMap(_map),e.domEvent(),e.mapEvent()},domEvent:function(){var e=this;$(".btn_theme").click(function(){e.wrap_facilty.css({display:"block"})}),$(".close_facilty").click(function(){e.wrap_facilty.css({display:"none"})}),e.themeByn.click(function(){var t=$(this);"off"==t.parent().attr("class")?(e.themeByn.parent().attr("class","off"),t.parent().attr("class","on"),e.themeCode=t.attr("code"),e.markerImgUrl=$(t.children()[0]).attr("src"),e.themeSelectImg.attr("src",e.markerImgUrl.split("ico_")[0]+"ico_B"+e.markerImgUrl.split("ico_")[1]),e.themeSelectImg.css("border","2px solid #ef538c"),_map.getZoom()<11&&_map.setZoom(11),e.searchCall(0)):(t.parent().attr("class","off"),e.themeCode=null,e.markerImgUrl=null,e.themeSelectImg.attr("src","./assets/images/btn_thema.png"),e.themeSelectImg.css("border",""),e.mapClear())})},mapEvent:function(){var e=this;_map.onEvent("idle",function(){e.idleEvent&&e.searchCall(0),e.idleEvent=!0}),_map.onEvent("click",function(t){"layer_container"==t.originEvent.target.id&&e.infoWindow&&(e.infoWindow.close(),e.idleEvent?e.searchCall(0):e.idleEvent=!0)})},warnMsgShow:function(){var e=this;e.warnMsged||(e.themeMsg.show(),e.timerwarn=setInterval(function(){clearInterval(e.timerwarn),e.themeMsg.hide()},2e3),e.warnMsged=!0)},searchCall:function(e){var t=this;if(t.mapClear(),t.themeCode)if(_map.getZoom()<11)t.themeCode&&t.warnMsgShow();else{t.warnMsged=!1,0==e&&(t.resultPois=[],t.guidVal=_app.guid()),olleh.maps.LatLng.valueOf(_map.getCenter());var a=olleh.maps.LatLng.valueOf(_map.getBounds().leftBottom),o=olleh.maps.LatLng.valueOf(_map.getBounds().rightTop);$.ajax({url:_app.geomasterUrl+"/search/v1.0/pois?numberOfResults=50&start="+e+"&guid="+t.guidVal,type:"post",contentType:"application/json",dataType:"json",headers:{Authorization:_app.apiKey,Accept:"application/json","Accept-Language":"ko-KR"},data:JSON.stringify({theme:{code:[t.themeCode]},bound:{left:a.x,bottom:a.y,right:o.x,top:o.y}}),success:function(a){this.url.split("guid=")[1]==t.guidVal&&(t.resultPois=t.resultPois.concat(a.pois),a.numberOfPois>50&&a.numberOfPois>e&&50==a.pois.length&&e<49&&13!=_map.getZoom()?(e+=50,t.searchCall(e)):t.mapDisplay())},error:function(e){}})}},mapDisplay:function(){var e=this;e.clusterer.setMap(null),e.resultPois.forEach(function(t,a){var o=new olleh.maps.LatLng(t.point.lat,t.point.lng),n=olleh.maps.UTMK.valueOf(o),i=new olleh.maps.overlay.Marker({position:n,icon:{url:e.markerImgUrl,size:new olleh.maps.Size(22,22)}}),r="";t.phones&&(t.phones.normal&&t.phones.normal.length>0&&(r=t.phones.normal[0]),t.phones.representation&&t.phones.representation.length>0&&(r=t.phones.representation[0]));var s={id:t.id,name:t.name,imgUrl:e.markerImgUrl,typeImgUrl:e.markerImgUrl,phone:r,category:t.category.middleName+" > "+t.category.subName,address:t.address.siDo+" "+t.address.siGunGu+" "+t.address.street+" "+t.address.streetNumber,addressGibun:t.address.eupMyeonDong+" "+t.address.houseNumber,extension:t.extension};i.purifyData=s,i.onEvent("click",function(t){e.infoWindowShow(i)}),e.markerArr.push(i),e.clusterer.add(i)}),e.clusterer.setMap(_map)},mapClear:function(){this.clusterer.clear(),this.markerArr=[]},infoWindowShow:function(e){var t=this;t.infoWindow&&(t.infoWindow.close(),delete t.infoWindow),t.idleEvent=!1,t.infoWindow=new override.CustomInfoWindow({disableAutoPan:!1,position:e.getPosition(),disableCloseButton:!0,padding:0,content:olleh.maps.util.applyTemplate(t.tmpl.routeInfoWindow,e.purifyData)}),t.infoWindow.setPixelOffset(new olleh.maps.Point(0,10)),t.infoWindow.open(_map,e),t.timer=setInterval(function(){clearInterval(t.timer),$(".btn_lyclose").click(function(){t.infoWindow&&t.infoWindow.close(),t.idleEvent?t.searchCall(0):t.idleEvent=!0}),$(".btn_geolist .btn_detail").click(function(){e.purifyData.extension&&e.purifyData.extension.homepageURL?window.open(e.purifyData.extension.homepageURL):alert("상세정보가 없습니다.")}),$(".btn_geolist .ico_start").click(function(){t.infoWindow.close(),_app.placeSearch.hide(),_app.roadSearch.show(),_app.roadSearch.setStart(e)}),$(".btn_geolist .ico_end").click(function(){t.infoWindow.close(),_app.placeSearch.hide(),_app.roadSearch.show(),_app.roadSearch.setEnd(e)})},500)},clusterInfoWindowShow:function(e){var t=this,a="";if(!(_map.getZoom()<13)){t.idleEvent=!1;var o=null;e.forEach(function(e,n){o=e,a+=olleh.maps.util.applyTemplate(t.tmpl.placeClusterInfoWindow,e.purifyData)}),t.infoWindow&&t.infoWindow.close(),t.infoWindow=new override.CustomInfoWindow({disableAutoPan:!1,position:o.getPosition(),disableCloseButton:!0,padding:6,content:a}),t.infoWindow.setPixelOffset(new olleh.maps.Point(0,10)),t.infoWindow.open(_map,o),t.custerTimer=setInterval(function(){clearInterval(t.custerTimer),$(".js_link").click(function(){var t=_app.themeLayer,a=this.id;e.forEach(function(e,o){a!=e.purifyData.id||t.infoWindowShow(e)})})},500)}},selectRelease:function(){var e=this;e.themeByn.parent().attr("class","off"),e.themeCode=null,e.markerImgUrl=null,e.themeSelectImg.attr("src","./assets/images/btn_thema.png"),e.mapClear()}})},334:function(e,t,a){"use strict";$class("tool.ContextMenu").define({layer_which:$(".layer_which"),addressMsg:$(".addressMsg"),parcelAddress:$(".addressMsg .parcelAddress"),roadAddress:$(".addressMsg .roadAddress"),coord:null,pageX:null,pageY:null,ContextMenu:function(e){var t=this;$(".layer_which .btn_rwhich").click(function(){t.layer_which.hide()}),$(".layer_which .ico_address").click(function(){t.reverseGeocode("msg"),t.layer_which.hide()}),$(".layer_which .ico_search").click(function(){_map.setCenter(t.coord),_app.placeSearch.searchCall(),t.layer_which.hide()}),$(".layer_which .ico_start").click(function(){t.reverseGeocode("start"),t.layer_which.hide()}),$(".layer_which .ico_via").click(function(){t.reverseGeocode("wp"),t.layer_which.hide()}),$(".layer_which .ico_end").click(function(){t.reverseGeocode("end")}),$(".layer_which .expand").click(function(){t.layer_which.hide(),_map.setCenter(t.coord),_map.getZoom()<13&&_map.setZoom(_map.getZoom()+1)}),$(".layer_which .cancel").click(function(){t.layer_which.hide()}),document.addEventListener("contextmenu",function(e){event.preventDefault()}),_map.onEvent("rightclick",function(e){t.pageX=e.pageXY.x,t.pageY=e.pageXY.y,t.coord=e.getCoord();var a=t.positionAdjustment(t.layer_which);return t.layer_which.css({left:a.x,top:a.y}),t.layer_which.show(),!1})},positionAdjustment:function(e){var t=this,a={x:t.pageX,y:t.pageY};return t.pageX+e.width()>$(window).width()&&(a.x=a.x-(t.pageX+e.width()-$(window).width())-4),t.pageY+e.height()>$(window).height()&&(a.y=a.y-(t.pageY+e.height()-$(window).height())-4),a},reverseGeocode:function(e){var t=this,a=olleh.maps.LatLng.valueOf(t.coord);$.ajax({url:_app.geomasterUrl+"/search/v1.0/utilities/geocode?point.lat="+a.y+"&point.lng="+a.x,type:"GET",contentType:"application/json",dataType:"json",headers:{Authorization:_app.apiKey,Accept:"application/json","Accept-Language":"ko-KR"},success:function(a){a&&a.residentialAddress.length>0&&("msg"==e?t.msgShow(a):t.roadSearchBind(a,e))},error:function(e){}})},msgShow:function(e){var t=this;t.parcelAddress.text("지번주소: "+e.residentialAddress[0].parcelAddress[0].fullAddress),e.residentialAddress[0].roadAddress&&e.residentialAddress[0].roadAddress.length>0?t.roadAddress.text("도로명주소: "+e.residentialAddress[0].roadAddress[0].fullAddress):t.roadAddress.text("도로명주소: ");var a=t.positionAdjustment(t.addressMsg);t.addressMsg.css({left:a.x,top:a.y}),t.addressMsg.show(),t.timerwarn=setInterval(function(){clearInterval(t.timerwarn),t.addressMsg.hide()},3e3)},roadSearchBind:function(e,t){var a=new olleh.maps.overlay.Marker({position:this.coord,icon:{url:"./assets/images/img_start.gif"}});a.purifyData={},a.purifyData.name=e.residentialAddress[0].parcelAddress[0].fullAddress,_app.placeSearch.hide(),_app.roadSearch.show(),"start"==t?_app.roadSearch.setStart(a,!0):"end"==t?_app.roadSearch.setEnd(a,!0):"wp"==t&&_app.roadSearch.setWp(a,!0)}})},335:function(e,t,a){"use strict";$class("left.LeftMenu").define({btnClose:$(".btn_close"),LeftMenu:function(){var e=this;$(".ico_sh01").click(function(){e.btnClose.trigger("click"),_app.placeSearch.show(),_app.roadSearch.hide()}),$(".ico_sh02").click(function(){e.btnClose.trigger("click"),_app.placeSearch.hide(),_app.roadSearch.show()}),$(".btn_close").click(function(){$("#aside").stop().animate({left:"-400px"},500),$(".bg_black").css({display:"none"})})}})},336:function(e,t,a){"use strict";$class("override.CustomInfoWindow").extend(olleh.maps.overlay.InfoWindow).define({_autoPan:function(){var e=_app.leftResultMgr.leftGap(),t=this.getMap().getOverlayLayer().layerMgr,a=olleh.maps.overlay.BaseInfoWindow,o=t.getLayerPxFromCoord(t.getCenter()),n=new olleh.maps.Point(Math.round(o.x),Math.round(o.y)),i=t.getViewportSize(),r=Math.round(i.width/2),s=Math.round(i.height/2),l=t.getLayerPxFromViewportPx(new olleh.maps.Point(e,0)),c=t.getLayerPxFromViewportPx(t.getViewportSize().asPoint()),p=this._calInfoData(),d=this.getOriginalLayerPx(),u=p.size,h=p.topLeft,m=p.bottomRight,f=d.x,_=d.y,g=h.subtract(l),w=c.subtract(m),v=!0,y=!0;if(g.x>0&&w.x>0&&(v=!1,f=n.x),g.y>0&&w.y>0&&(y=!1,_=n.y),v||y){var S=i.subtract(u),C=S.width<0,k=S.height<0,b=n.subtract(d),$=b.x>0,x=b.y>0;v&&(f=C?h.x-a.AUTO_PAN_MARGIN+r:$?h.x-a.AUTO_PAN_MARGIN+r:h.x+u.width+a.AUTO_PAN_MARGIN-r),y&&(_=k?h.y-a.AUTO_PAN_MARGIN+s:x?h.y-a.AUTO_PAN_MARGIN+s:s<u.height&&w.y>0?h.y-a.AUTO_PAN_MARGIN+s:m.y+a.AUTO_PAN_MARGIN-s);var E=f;g.x<0&&(E-=e),w.x<0&&(E+=82);var M=t.getCoordFromLayerPx(new olleh.maps.Point(E,_));t.panTo(M)}}})},337:function(e,t,a){"use strict";$class("left.LeftResultMgr").define({placeSearchResult_dom:$("#placeSearchResult"),attSearchResult_dom:$("#attSearchResult"),LeftResultMgr:function(){var e=this;$("#placeSearchResult .btn_open03").click(function(){"0px"==e.placeSearchResult_dom.css("left")?e.placeSearchResult_dom.stop().animate({left:"-394px"},500,function(){_app.eventbusjs.dispatch("leftExpand")}):e.placeSearchResult_dom.stop().animate({left:"0px"},500,function(){_app.eventbusjs.dispatch("leftCollapse")})}),$("#attSearchResult .btn_open03").click(function(){"0px"==e.attSearchResult_dom.css("left")?e.attSearchResult_dom.stop().animate({left:"-394px"},500,function(){_app.eventbusjs.dispatch("leftExpand")}):e.attSearchResult_dom.stop().animate({left:"0px"},500,function(){_app.eventbusjs.dispatch("leftCollapse")})})},leftGap:function(){var e=0;return"block"==this.placeSearchResult_dom.css("display")&&"0px"==this.placeSearchResult_dom.css("left")&&(e=394),"block"==this.attSearchResult_dom.css("display")&&"0px"==this.attSearchResult_dom.css("left")&&(e=394),e}})},338:function(e,t,a){e.exports=function(){var e;return(e=function(){this.listeners={}}).prototype={addEventListener:function(e,t,a){for(var o=[],n=arguments.length,i=0;i<n;i++)o.push(arguments[i]);o=o.length>3?o.splice(3,o.length-1):[],void 0!==this.listeners[e]?this.listeners[e].push({scope:a,callback:t,args:o}):this.listeners[e]=[{scope:a,callback:t,args:o}]},removeEventListener:function(e,t,a){if(void 0!==this.listeners[e]){for(var o=this.listeners[e].length,n=[],i=0;i<o;i++){var r=this.listeners[e][i];r.scope==a&&r.callback==t||n.push(r)}this.listeners[e]=n}},hasEventListener:function(e,t,a){if(void 0!==this.listeners[e]){var o=this.listeners[e].length;if(void 0===t&&void 0===a)return o>0;for(var n=0;n<o;n++){var i=this.listeners[e][n];if((!a||i.scope==a)&&i.callback==t)return!0}}return!1},dispatch:function(e,t){for(var a={type:e,target:t},o=[],n=arguments.length,i=0;i<n;i++)o.push(arguments[i]);if(o=o.length>2?o.splice(2,o.length-1):[],o=[a].concat(o),void 0!==this.listeners[e]){var r=this.listeners[e].slice(),s=r.length;for(i=0;i<s;i++){var l=r[i];if(l&&l.callback){var c=o.concat(l.args);l.callback.apply(l.scope,c)}}}},getEvents:function(){var e="";for(var t in this.listeners)for(var a=this.listeners[t].length,o=0;o<a;o++){var n=this.listeners[t][o];e+=n.scope&&n.scope.className?n.scope.className:"anonymous",e+=" listen for '"+t+"'\n"}return e}},new e}()}}]);